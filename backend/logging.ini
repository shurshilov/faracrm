# ============================================================
#  FARA CRM - logging configuration
#  uvicorn: --log-config ./backend/logging.ini
# ============================================================

# -- Formatters ----------------------------------------------

[formatters]
keys=default,system_fmt,crm_fmt

[formatter_default]
format=%(asctime)s  %(levelname)-8s  %(name)s | %(message)s
datefmt=%H:%M:%S

[formatter_system_fmt]
format=%(asctime)s  %(levelname)-8s  %(name)s | %(message)s
datefmt=%H:%M:%S
class=backend.base.system.logger.colored.PurpleFormatter

[formatter_crm_fmt]
format=%(asctime)s  %(levelname)-8s  %(name)s | %(message)s
datefmt=%H:%M:%S
class=backend.base.system.logger.colored.CyanFormatter

# -- Handlers ------------------------------------------------

[handlers]
keys=console,system_console,crm_console

[handler_console]
class=StreamHandler
args=(sys.stdout,)
formatter=default

[handler_system_console]
class=StreamHandler
args=(sys.stdout,)
formatter=system_fmt

[handler_crm_console]
class=StreamHandler
args=(sys.stdout,)
formatter=crm_fmt

# -- Loggers -------------------------------------------------

[loggers]
keys=root,uvicorn,uvicorn_access,uvicorn_error,dotorm,asyncpg,asyncio,backend_system,backend_crm

[logger_root]
level=WARNING
handlers=console

# -- Uvicorn -------------------------------------------------

[logger_uvicorn]
level=INFO
handlers=console
qualname=uvicorn
propagate=0

[logger_uvicorn_access]
level=WARNING
handlers=console
qualname=uvicorn.access
propagate=0

[logger_uvicorn_error]
level=INFO
handlers=console
qualname=uvicorn.error
propagate=0

# -- Database / ORM ------------------------------------------

[logger_dotorm]
level=WARNING
handlers=console
qualname=dotorm
propagate=0

[logger_asyncpg]
level=WARNING
handlers=console
qualname=asyncpg
propagate=0

# -- Python internals ----------------------------------------

[logger_asyncio]
level=WARNING
handlers=console
qualname=asyncio
propagate=0

# -- Application code ----------------------------------------

# Purple - system modules
[logger_backend_system]
level=INFO
handlers=system_console
qualname=backend.base.system
propagate=0

# Cyan/Blue - CRM modules
[logger_backend_crm]
level=INFO
handlers=crm_console
qualname=backend.base.crm
propagate=0