import{n as m,j as s,p as Ne,u as j,a as M,U as Ae,c as H,i as B,g as Ie,r as ne,f as A,B as T,E as Ee,R as V,J as q,d as _e,G as se,Q as ke}from"./index-vK4T-B9h.js";import{u as ae,F as $,a as F,b as D}from"./Form-DV-7_dTK.js";import{S as De}from"./Switch-Bj1jBbpB.js";import{P as z}from"./Actions-DltArpq0.js";import{I as Pe,u as Te}from"./Button-kQItaDUP.js";import{I as re}from"./use-form-1MgghPQc.js";const ce=m.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:o,...t},r)=>s.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...o,width:e,height:e},ref:r,...t,children:s.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));ce.displayName="@mantine/core/CloseIcon";var ie={root:"m_86a44da5","root--subtle":"m_220c80f2"};const Re={variant:"subtle"},Fe=H((e,{size:o,radius:t,iconSize:r})=>({root:{"--cb-size":B(o,"cb-size"),"--cb-radius":t===void 0?void 0:Ie(t),"--cb-icon-size":ne(r)}})),K=Ne((e,o)=>{const t=j("CloseButton",Re,e),{iconSize:r,children:i,vars:u,radius:n,className:l,classNames:a,style:c,styles:p,unstyled:d,"data-disabled":x,disabled:f,variant:S,icon:C,mod:w,...y}=t,_=M({name:"CloseButton",props:t,className:l,style:c,classes:ie,classNames:a,styles:p,unstyled:d,vars:u,varsResolver:Fe});return s.jsxs(Ae,{ref:o,...y,unstyled:d,variant:S,disabled:f,mod:[{disabled:f||x},w],..._("root",{variant:S,active:!f&&!x}),children:[C||s.jsx(ce,{}),i]})});K.classes=ie;K.displayName="@mantine/core/CloseButton";var I={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const $e={error:null},Le=H((e,{size:o})=>({chevron:{"--combobox-chevron-size":B(o,"combobox-chevron-size")}})),G=A((e,o)=>{const t=j("ComboboxChevron",$e,e),{size:r,error:i,style:u,className:n,classNames:l,styles:a,unstyled:c,vars:p,mod:d,...x}=t,f=M({name:"ComboboxChevron",classes:I,props:t,style:u,className:n,classNames:l,styles:a,unstyled:c,vars:p,varsResolver:Le,rootSelector:"chevron"});return s.jsx(T,{component:"svg",...x,...f("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},d],ref:o,children:s.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});G.classes=I;G.displayName="@mantine/core/ComboboxChevron";const[Be,E]=Ee("Combobox component was not found in tree"),le=m.forwardRef(({size:e,onMouseDown:o,onClick:t,onClear:r,...i},u)=>s.jsx(K,{ref:u,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:n=>{n.preventDefault(),o==null||o(n)},onClick:n=>{r(),t==null||t(n)}}));le.displayName="@mantine/core/ComboboxClearButton";const ze={},U=A((e,o)=>{const{classNames:t,styles:r,className:i,style:u,hidden:n,...l}=j("ComboboxDropdown",ze,e),a=E();return s.jsx(z.Dropdown,{...l,ref:o,role:"presentation","data-hidden":n||void 0,...a.getStyles("dropdown",{className:i,style:u,classNames:t,styles:r})})});U.classes=I;U.displayName="@mantine/core/ComboboxDropdown";const Me={refProp:"ref"},de=A((e,o)=>{const{children:t,refProp:r}=j("ComboboxDropdownTarget",Me,e);if(E(),!V(t))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return s.jsx(z.Target,{ref:o,refProp:r,children:t})});de.displayName="@mantine/core/ComboboxDropdownTarget";const He={},Z=A((e,o)=>{const{classNames:t,className:r,style:i,styles:u,vars:n,...l}=j("ComboboxEmpty",He,e),a=E();return s.jsx(T,{ref:o,...a.getStyles("empty",{className:r,classNames:t,styles:u,style:i}),...l})});Z.classes=I;Z.displayName="@mantine/core/ComboboxEmpty";function Q({onKeyDown:e,withKeyboardNavigation:o,withAriaAttributes:t,withExpandedAttribute:r,targetType:i,autoComplete:u}){const n=E(),[l,a]=m.useState(null),c=d=>{if(e==null||e(d),!n.readOnly&&o){if(d.nativeEvent.isComposing)return;if(d.nativeEvent.code==="ArrowDown"&&(d.preventDefault(),n.store.dropdownOpened?a(n.store.selectNextOption()):(n.store.openDropdown("keyboard"),a(n.store.selectActiveOption()))),d.nativeEvent.code==="ArrowUp"&&(d.preventDefault(),n.store.dropdownOpened?a(n.store.selectPreviousOption()):(n.store.openDropdown("keyboard"),a(n.store.selectActiveOption()))),d.nativeEvent.code==="Enter"||d.nativeEvent.code==="NumpadEnter"){if(d.nativeEvent.keyCode===229)return;const x=n.store.getSelectedOptionIndex();n.store.dropdownOpened&&x!==-1?(d.preventDefault(),n.store.clickSelectedOption()):i==="button"&&(d.preventDefault(),n.store.openDropdown("keyboard"))}d.nativeEvent.code==="Escape"&&n.store.closeDropdown("keyboard"),d.nativeEvent.code==="Space"&&i==="button"&&(d.preventDefault(),n.store.toggleDropdown("keyboard"))}};return{...t?{"aria-haspopup":"listbox","aria-expanded":r&&!!(n.store.listId&&n.store.dropdownOpened)||void 0,"aria-controls":n.store.listId,"aria-activedescendant":n.store.dropdownOpened&&l||void 0,autoComplete:u,"data-expanded":n.store.dropdownOpened||void 0,"data-mantine-stop-propagation":n.store.dropdownOpened||void 0}:{},onKeyDown:c}}const Ve={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},ue=A((e,o)=>{const{children:t,refProp:r,withKeyboardNavigation:i,withAriaAttributes:u,withExpandedAttribute:n,targetType:l,autoComplete:a,...c}=j("ComboboxEventsTarget",Ve,e);if(!V(t))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const p=E(),d=Q({targetType:l,withAriaAttributes:u,withKeyboardNavigation:i,withExpandedAttribute:n,onKeyDown:t.props.onKeyDown,autoComplete:a});return m.cloneElement(t,{...d,...c,[r]:q(o,p.store.targetRef,t==null?void 0:t.ref)})});ue.displayName="@mantine/core/ComboboxEventsTarget";const qe={},J=A((e,o)=>{const{classNames:t,className:r,style:i,styles:u,vars:n,...l}=j("ComboboxFooter",qe,e),a=E();return s.jsx(T,{ref:o,...a.getStyles("footer",{className:r,classNames:t,style:i,styles:u}),...l,onMouseDown:c=>{c.preventDefault()}})});J.classes=I;J.displayName="@mantine/core/ComboboxFooter";const Ke={},W=A((e,o)=>{const{classNames:t,className:r,style:i,styles:u,vars:n,children:l,label:a,...c}=j("ComboboxGroup",Ke,e),p=E();return s.jsxs(T,{ref:o,...p.getStyles("group",{className:r,classNames:t,style:i,styles:u}),...c,children:[a&&s.jsx("div",{...p.getStyles("groupLabel",{classNames:t,styles:u}),children:a}),l]})});W.classes=I;W.displayName="@mantine/core/ComboboxGroup";const Ge={},X=A((e,o)=>{const{classNames:t,className:r,style:i,styles:u,vars:n,...l}=j("ComboboxHeader",Ge,e),a=E();return s.jsx(T,{ref:o,...a.getStyles("header",{className:r,classNames:t,style:i,styles:u}),...l,onMouseDown:c=>{c.preventDefault()}})});X.classes=I;X.displayName="@mantine/core/ComboboxHeader";function me({value:e,valuesDivider:o=",",...t}){return s.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(o):e||"",...t})}me.displayName="@mantine/core/ComboboxHiddenInput";const Ue={},Y=A((e,o)=>{const t=j("ComboboxOption",Ue,e),{classNames:r,className:i,style:u,styles:n,vars:l,onClick:a,id:c,active:p,onMouseDown:d,onMouseOver:x,disabled:f,selected:S,mod:C,...w}=t,y=E(),_=m.useId(),k=c||_;return s.jsx(T,{...y.getStyles("option",{className:i,classNames:r,styles:n,style:u}),...w,ref:o,id:k,mod:["combobox-option",{"combobox-active":p,"combobox-disabled":f,"combobox-selected":S},C],role:"option",onClick:g=>{var L;f?g.preventDefault():((L=y.onOptionSubmit)==null||L.call(y,t.value,t),a==null||a(g))},onMouseDown:g=>{g.preventDefault(),d==null||d(g)},onMouseOver:g=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),x==null||x(g)}})});Y.classes=I;Y.displayName="@mantine/core/ComboboxOption";const Ze={},ee=A((e,o)=>{const t=j("ComboboxOptions",Ze,e),{classNames:r,className:i,style:u,styles:n,id:l,onMouseDown:a,labelledBy:c,...p}=t,d=E(),x=_e(l);return m.useEffect(()=>{d.store.setListId(x)},[x]),s.jsx(T,{ref:o,...d.getStyles("options",{className:i,style:u,classNames:r,styles:n}),...p,id:x,role:"listbox","aria-labelledby":c,onMouseDown:f=>{f.preventDefault(),a==null||a(f)}})});ee.classes=I;ee.displayName="@mantine/core/ComboboxOptions";const Qe={withAriaAttributes:!0,withKeyboardNavigation:!0},oe=A((e,o)=>{const t=j("ComboboxSearch",Qe,e),{classNames:r,styles:i,unstyled:u,vars:n,withAriaAttributes:l,onKeyDown:a,withKeyboardNavigation:c,size:p,...d}=t,x=E(),f=x.getStyles("search"),S=Q({targetType:"input",withAriaAttributes:l,withKeyboardNavigation:c,withExpandedAttribute:!1,onKeyDown:a,autoComplete:"off"});return s.jsx(Pe,{ref:q(o,x.store.searchRef),classNames:[{input:f.className},r],styles:[{input:f.style},i],size:p||x.size,...S,...d,__staticSelector:"Combobox"})});oe.classes=I;oe.displayName="@mantine/core/ComboboxSearch";const Je={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},pe=A((e,o)=>{const{children:t,refProp:r,withKeyboardNavigation:i,withAriaAttributes:u,withExpandedAttribute:n,targetType:l,autoComplete:a,...c}=j("ComboboxTarget",Je,e);if(!V(t))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const p=E(),d=Q({targetType:l,withAriaAttributes:u,withKeyboardNavigation:i,withExpandedAttribute:n,onKeyDown:t.props.onKeyDown,autoComplete:a}),x=m.cloneElement(t,{...d,...c});return s.jsx(z.Target,{ref:q(o,p.store.targetRef),children:x})});pe.displayName="@mantine/core/ComboboxTarget";function We(e,o,t){for(let r=e-1;r>=0;r-=1)if(!o[r].hasAttribute("data-combobox-disabled"))return r;if(t){for(let r=o.length-1;r>-1;r-=1)if(!o[r].hasAttribute("data-combobox-disabled"))return r}return e}function Xe(e,o,t){for(let r=e+1;r<o.length;r+=1)if(!o[r].hasAttribute("data-combobox-disabled"))return r;if(t){for(let r=0;r<o.length;r+=1)if(!o[r].hasAttribute("data-combobox-disabled"))return r}return e}function Ye(e){for(let o=0;o<e.length;o+=1)if(!e[o].hasAttribute("data-combobox-disabled"))return o;return-1}function be({defaultOpened:e,opened:o,onOpenedChange:t,onDropdownClose:r,onDropdownOpen:i,loop:u=!0,scrollBehavior:n="instant"}={}){const[l,a]=Te({value:o,defaultValue:e,finalValue:!1,onChange:t}),c=m.useRef(null),p=m.useRef(-1),d=m.useRef(null),x=m.useRef(null),f=m.useRef(-1),S=m.useRef(-1),C=m.useRef(-1),w=m.useCallback((b="unknown")=>{l||(a(!0),i==null||i(b))},[a,i,l]),y=m.useCallback((b="unknown")=>{l&&(a(!1),r==null||r(b))},[a,r,l]),_=m.useCallback((b="unknown")=>{l?y(b):w(b)},[y,w,l]),k=m.useCallback(()=>{const b=document.querySelector(`#${c.current} [data-combobox-selected]`);b==null||b.removeAttribute("data-combobox-selected"),b==null||b.removeAttribute("aria-selected")},[]),g=m.useCallback(b=>{const O=document.getElementById(c.current),v=O==null?void 0:O.querySelectorAll("[data-combobox-option]");if(!v)return null;const N=b>=v.length?0:b<0?v.length-1:b;return p.current=N,v!=null&&v[N]&&!v[N].hasAttribute("data-combobox-disabled")?(k(),v[N].setAttribute("data-combobox-selected","true"),v[N].setAttribute("aria-selected","true"),v[N].scrollIntoView({block:"nearest",behavior:n}),v[N].id):null},[n,k]),L=m.useCallback(()=>{const b=document.querySelector(`#${c.current} [data-combobox-active]`);if(b){const O=document.querySelectorAll(`#${c.current} [data-combobox-option]`),v=Array.from(O).findIndex(N=>N===b);return g(v)}return g(0)},[g]),xe=m.useCallback(()=>g(Xe(p.current,document.querySelectorAll(`#${c.current} [data-combobox-option]`),u)),[g,u]),fe=m.useCallback(()=>g(We(p.current,document.querySelectorAll(`#${c.current} [data-combobox-option]`),u)),[g,u]),he=m.useCallback(()=>g(Ye(document.querySelectorAll(`#${c.current} [data-combobox-option]`))),[g]),ye=m.useCallback((b="selected",O)=>{C.current=window.setTimeout(()=>{var te;const v=document.querySelectorAll(`#${c.current} [data-combobox-option]`),N=Array.from(v).findIndex(Oe=>Oe.hasAttribute(`data-combobox-${b}`));p.current=N,O!=null&&O.scrollIntoView&&((te=v[N])==null||te.scrollIntoView({block:"nearest",behavior:n}))},0)},[]),ge=m.useCallback(()=>{p.current=-1,k()},[k]),Ce=m.useCallback(()=>{const b=document.querySelectorAll(`#${c.current} [data-combobox-option]`),O=b==null?void 0:b[p.current];O==null||O.click()},[]),ve=m.useCallback(b=>{c.current=b},[]),we=m.useCallback(()=>{f.current=window.setTimeout(()=>d.current.focus(),0)},[]),je=m.useCallback(()=>{S.current=window.setTimeout(()=>x.current.focus(),0)},[]),Se=m.useCallback(()=>p.current,[]);return m.useEffect(()=>()=>{window.clearTimeout(f.current),window.clearTimeout(S.current),window.clearTimeout(C.current)},[]),{dropdownOpened:l,openDropdown:w,closeDropdown:y,toggleDropdown:_,selectedOptionIndex:p.current,getSelectedOptionIndex:Se,selectOption:g,selectFirstOption:he,selectActiveOption:L,selectNextOption:xe,selectPreviousOption:fe,resetSelectedOption:ge,updateSelectedOptionIndex:ye,listId:c.current,setListId:ve,clickSelectedOption:Ce,searchRef:d,focusSearchInput:we,targetRef:x,focusTarget:je}}const eo={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},oo=H((e,{size:o,dropdownPadding:t})=>({options:{"--combobox-option-fz":se(o),"--combobox-option-padding":B(o,"combobox-option-padding")},dropdown:{"--combobox-padding":t===void 0?void 0:ne(t),"--combobox-option-fz":se(o),"--combobox-option-padding":B(o,"combobox-option-padding")}}));function h(e){const o=j("Combobox",eo,e),{classNames:t,styles:r,unstyled:i,children:u,store:n,vars:l,onOptionSubmit:a,onClose:c,size:p,dropdownPadding:d,resetSelectionOnOptionHover:x,__staticSelector:f,readOnly:S,...C}=o,w=be(),y=n||w,_=M({name:f||"Combobox",classes:I,props:o,classNames:t,styles:r,unstyled:i,vars:l,varsResolver:oo}),k=()=>{c==null||c(),y.closeDropdown()};return s.jsx(Be,{value:{getStyles:_,store:y,onOptionSubmit:a,size:p,resetSelectionOnOptionHover:x,readOnly:S},children:s.jsx(z,{opened:y.dropdownOpened,...C,onChange:g=>!g&&k(),withRoles:!1,unstyled:i,children:u})})}const to=e=>e;h.extend=to;h.classes=I;h.displayName="@mantine/core/Combobox";h.Target=pe;h.Dropdown=U;h.Options=ee;h.Option=Y;h.Search=oe;h.Empty=Z;h.Chevron=G;h.Footer=J;h.Header=X;h.EventsTarget=ue;h.DropdownTarget=de;h.Group=W;h.ClearButton=le;h.HiddenInput=me;const R=({name:e,...o})=>{const t=ae();return m.createElement(De,{...o,...t.getInputProps(e),key:t.key(e)})},P=({name:e,relatedModel:o,sortKey:t="id",sortDirection:r="asc",limit:i=80,...u})=>{const n=ae(),[l,a]=m.useState(""),[c,p]=m.useState(),[d,x]=m.useState(!1),{data:f,isLoading:S}=ke({model:o,limit:i,sort:t,order:r,fields:["id","name"],filter:[["name","ilike",l]]},{skip:!d&&l===""});m.useEffect(()=>{if(f){const w=f.data.map(y=>s.jsx(h.Option,{value:y.id.toString(),children:y.name},y.id));p(w)}},[f]);const C=be({onDropdownClose:()=>{C.resetSelectedOption(),C.focusTarget(),a("")},onDropdownOpen:()=>{x(!0),C.focusSearchInput()}});return s.jsx(s.Fragment,{children:n.getValues()&&s.jsxs(s.Fragment,{children:[s.jsx(re,{display:"none",readOnly:!0,...n.getInputProps(e)},n.key(e)),s.jsxs(h,{...u,...n.getInputProps(e),store:C,width:250,position:"bottom-start",withArrow:!0,onOptionSubmit:w=>{if(f){const y=f.data.find(_=>_.id.toString()===w);n.setValues({[e]:y})}C.closeDropdown()},children:[s.jsx(h.Target,{children:s.jsx(re,{component:"button",type:"button",label:e,onClick:()=>{C.openDropdown()},onFocus:()=>C.openDropdown(),onBlur:()=>C.closeDropdown(),children:n.getValues()[e]?n.getValues()[e].name:""})}),s.jsxs(h.Dropdown,{children:[s.jsx(h.Search,{value:l,onChange:w=>{a(w.currentTarget.value)},placeholder:"Search "+e}),s.jsx(h.Options,{children:S?s.jsx(h.Empty,{children:"Loading...."}):c&&c.length?c:s.jsx(h.Empty,{children:"Nothing found"})})]})]})]})})};function lo(){return s.jsxs($,{model:"access_list",children:[s.jsx(F,{name:"id"}),s.jsx(R,{name:"active"}),s.jsx(D,{name:"name"}),s.jsx(P,{name:"model_id",relatedModel:"models"}),s.jsx(P,{name:"role_id",relatedModel:"roles"}),s.jsx(R,{name:"perm_create"}),s.jsx(R,{name:"perm_read"}),s.jsx(R,{name:"perm_update"}),s.jsx(R,{name:"perm_delete"})]})}function uo(){return s.jsxs($,{model:"roles",children:[s.jsx(F,{name:"id"}),s.jsx(P,{name:"model_id",relatedModel:"models"}),s.jsx(D,{name:"name"})]})}function mo(){return s.jsxs($,{model:"rules",children:[s.jsx(F,{name:"id"}),s.jsx(D,{name:"name"}),s.jsx(P,{name:"role_id",relatedModel:"roles"})]})}function po(){return s.jsxs($,{model:"models",children:[s.jsx(F,{name:"id"}),s.jsx(D,{name:"name"})]})}function bo(){return s.jsxs($,{model:"sessions",children:[s.jsx(F,{name:"id"}),s.jsx(R,{name:"active"}),s.jsx(P,{name:"user_id",relatedModel:"users"}),s.jsx(D,{name:"token"}),s.jsx(F,{name:"ttl"}),s.jsx(D,{name:"expired_datetime"}),s.jsx(D,{name:"create_datetime"}),s.jsx(P,{name:"create_user_id",relatedModel:"users"}),s.jsx(D,{name:"update_datetime"}),s.jsx(P,{name:"update_user_id",relatedModel:"users"})]})}export{lo as FormAccessList,po as FormModels,uo as FormRoles,mo as FormRules,bo as FormSessions};
